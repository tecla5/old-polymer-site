<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../tecla5-main/tecla5-main.html">

<link rel="import" href="../../bower_components/core-drawer-panel/core-drawer-panel.html">
<link rel="import" href="../../bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="../../bower_components/core-animated-pages/transitions/slide-up.html">
<link rel="import" href="../../bower_components/core-animated-pages/transitions/scale-up.html">
<link rel="import" href="../../bower_components/core-animated-pages/transitions/tile-cascade.html">
<link rel="import" href="../../bower_components/core-media-query/core-media-query.html">




<polymer-element name="tecla5-app" attributes="" vertical layout fullbleed>
  <template>
    <link rel="stylesheet" href="tecla5-app.css">

         
   
    <core-animated-pages selected="{{selected}}" transitions="cross-fade cross-fade-delayed scale-up slide-up slide-up-offscreen slide-down tile-cascade hero-transition" flex auto on-core-animated-pages-transition-end="{{transitionEndAction}}">
    
              
      <!-- presentation -->  
      <div name="splash">
        <span fit class="splash {{ {wide: wide} | tokenList }}" cross-fade>splash</span>
      </div>
      
      <!-- main -->
      <tecla5-main name="main"></tecla5-main>
    
            
      <core-media-query query="min-width: {{responsiveWidth}}" queryMatches="{{wide}}"></core-media-query>
    </core-animated-pages>    
            
    
  </template>
  <script>
    (function () {
      
      

      Polymer('tecla5-app', {

        responsiveWidth: '900px',
        
        selected: 'splash',
        minSplashTime: 1000,
        
        
        observe: {
          //'user': 'startup'
        },

        ready: function(){
          this.readyTime = Date.now();
          
          if(!this.splashed){
            this.showSplash();
          } else {
            this.showMain();
          }
        },
        
        
        showSplash: function() {
          this.splashed = true;
          var elapsed = Date.now() - this.readyTime;
          var t = this.minSplashTime - elapsed;
          this.async('showMain', null, t > 0 ? t : 0);
        },
        
        showMain: function() {
          this.selected = 'main';// home
        },
        
        transitionEndAction: function() {
          this.disableLeaderboard = (this.selected !== 'leaderboard');
          //this.selected = 'main';// home
        }        
        
      });

    })();
  </script>
</polymer-element>
